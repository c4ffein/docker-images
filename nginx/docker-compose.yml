services:
  nginx:
    build:
      context: .
      args:
        NGINX_VERSION: 1.26.2
        ACME_MODULE_VERSION: master
    image: nginx-acme:latest
    container_name: nginx-acme
    ports:
      - "80:80"
      - "443:443"
    volumes:
      # Uncomment to use custom nginx config
      # - ./nginx.conf:/etc/nginx/nginx.conf:ro

      # Uncomment to add custom server configurations
      # - ./conf.d:/etc/nginx/conf.d:ro

      # Web root
      - ./html:/var/www/html

      # ACME certificates (persistent)
      - nginx-certs:/etc/nginx/acme

      # Logs (optional, already sent to stdout/stderr)
      # - ./logs:/var/log/nginx
    restart: unless-stopped
    networks:
      - nginx-network

volumes:
  nginx-certs:
    driver: local

networks:
  nginx-network:
    driver: bridge
